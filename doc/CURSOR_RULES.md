# Cursor AI ????????

?????????Cursor AI????????????????????

## ?? ??????: ????????

**?????????????????????????????????????????????**

### ?????????
- ? ?????????????
- ? ??????????????
- ? ??????????????
- ? ?????go.mod?package.json??????????
- ? ???????docker-compose.yml?Dockerfile??????????
- ? ??????????
- ? ????????.proto????
- ? ?????????????????????

### ???????
- ?? ?????????
- ?? ?????????
- ?? ?????????

## ????

????????????????????????

1. **????????**
   - ??????????
   - ?????????????

2. **?????????????????**
   - ????????????
   - ???????????????????????

3. **??????????????**
   - ??????????
   - ?????????

4. **????????????????**
   - `go mod tidy`?`npm install`??

5. **?????????????**
   - ????????????

### ????

```
[????]
??: ????????????????????????????????????????
??????:
  - server/domain/s3_storage.go (????????????10-15??)
  - server/application/service.go (?????????30-35??)
????: ????????????
??????: ???????????

??????????????????
```

**??????????????????????**

## ????????

### ???????Go + gRPC?
```
server/
??? domain/          # ???????????????
?   ??? storage.go          # ?????????????????
?   ??? s3_storage.go       # AWS S3???????
?   ??? gcs_storage.go      # Google Cloud Storage??
?   ??? azure_storage.go    # Azure Blob Storage??
?   ??? greeter.go          # ???????????
??? application/    # ?????????
?   ??? service.go         # gRPC?????
??? main.go         # ?????????????
```

### ????????React + TypeScript?
```
webapp/
??? src/
?   ??? components/     # React???????
?   ??? hooks/          # ???????
?   ??? services/       # API?????
?   ??? types.ts       # TypeScript???
??? handlers/           # Go HTTP?????
```

### ??????????
- `docker-compose.yml`: ?????????????????
  - `server`: gRPC????
  - `client`: gRPC??????
  - `webapp`: Web????????
  - `localstack`: AWS S3???????
  - `fake-gcs`: Google Cloud Storage???????
  - `azurite`: Azure Blob Storage???????

## ???????????

???????????????????????

| ?????? | ? | ??????? | ???? |
|------------|-----|--------------|---------|
| AWS S3 | `s3` | Localstack | `S3_BUCKET_NAME`, `LOCALSTACK_ENDPOINT` |
| Google Cloud Storage | `gcs` | fake-gcs-server | `GCS_BUCKET_NAME`, `STORAGE_EMULATOR_HOST` |
| Azure Blob Storage | `azure` | Azurite | `AZURE_STORAGE_ENDPOINT`, `AZURE_STORAGE_CONTAINER_NAME` |

### ???????????????????

1. `server/domain/`??????????????????
2. `StorageService`???????????
3. `server/application/service.go`????????????????
4. UI?`webapp/src/App.tsx`????????
5. ??????`docker-compose.yml`???????????

**????????????**

## ドキュメントファイルの整理ルール

**重要: すべてのMarkdownドキュメントファイル（.md）は`doc/`ディレクトリに配置する**

### ルール
- **README.md**: プロジェクトルートに配置（標準的な位置）
- **その他のすべての.mdファイル**: `doc/`ディレクトリに配置
  - 進捗レポート、設計ドキュメント、バグ修正メモ、テスト結果など
  - 例: `doc/MULTI_ENGINE_OCR_PROGRESS.md`, `doc/CURSOR_RULES.md`, `doc/BUILD_ERRORS_ANALYSIS.md`

### 理由
- プロジェクトルートの整理
- ドキュメントを一箇所に集約
- 重要なREADME.mdを見つけやすくする

### 注意事項
- 新規作成する.mdファイルは必ず`doc/`ディレクトリに作成する
- 既存の.mdファイルがルートにある場合は`doc/`に移動する
- README.mdのみルートに残す

## ????????

### Go
- ?????????????
- ???????????????????
- ????????????`fmt.Errorf`????
- ??????????????
- ?????????????????

### TypeScript/React
- ????????????????????????????
- ???????????????
- TypeScript????????`any`?????
- ????????`components/`?????????

### ????????
- Go: `snake_case.go` ??? `kebab-case.go`
- TypeScript: `PascalCase.tsx`??????????`camelCase.ts`?????????
- ???????: `*_test.go`?`*.test.ts`

## ????

### ??
- `AUTH_TOKEN`: gRPC??????????
- `GRPC_SERVER_PORT`: gRPC?????????????: 50051?

### AWS S3
- `S3_BUCKET_NAME`: S3?????
- `AWS_REGION`: AWS?????
- `LOCALSTACK_ENDPOINT`: Localstack???????

### Google Cloud Storage
- `GCS_BUCKET_NAME`: GCS?????
- `STORAGE_EMULATOR_HOST`: GCS??????????
- `GOOGLE_CLOUD_PROJECT`: GCP??????ID

### Azure Blob Storage
- `AZURE_STORAGE_ENDPOINT`: Azurite???????????????????
- `AZURE_STORAGE_ACCOUNT_NAME`: Azure???????????
- `AZURE_STORAGE_ACCOUNT_KEY`: Azure????????????
- `AZURE_STORAGE_CONTAINER_NAME`: ?????
- `AZURE_STORAGE_CONNECTION_STRING`: ????????????

**????????`.env`?????`docker-compose.yml`????????????????????????????**

## ????????????????

- ???????????`log.Printf`???
- ??????????????????????
- Docker???????????`docker-compose logs <service-name>`?
- ?????????????????

## ????????

- `.gitignore`???????????????????
  - `venv/`?Python?????
  - `node_modules/`?Node.js?????
  - `.env`???????????
- ???????????`go.mod`?`package.json`???
- ????????`.proto`??????`protoc`???????
- ??????????????????????????????

## ????????

### ??? ?

```
[????]
??: S3????????????????????
??????:
  - server/domain/s3_storage.go
    - UploadFile???????????????50-60?????
    - ????????????????????85?????
????: 
  - ?????????????S3??????????
  - ????????????????
??????: ??

??????????????????
```

### ??? ?

```
s3_storage.go???????
```

**?????????????????????????????????????**

---

## ????

- 2025-01-XX: ?????Azure Blob Storage????
## 変更前の確認ルール

### 重要な変更を行う前の確認
- **コード変更を行う前に、必ずユーザーに確認を取ること**
- 変更内容、対象ファイル、影響範囲を明確に示すこと
- ユーザーの承認を得てから実装すること
- 緊急の修正や明示的な指示がある場合は除く

### 確認が必要な変更例
- データベース構造の変更
- API仕様の変更
- セキュリティ関連の変更
- パフォーマンスに影響する変更
- 複数ファイルにわたる大きなリファクタリング

### 確認不要な変更例
- ユーザーから明示的な指示があった変更
- 既存のバグ修正（影響範囲が明確な場合）
- 小さなタイポ修正
- コメントやドキュメントの更新のみ

